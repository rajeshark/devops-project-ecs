{"ast":null,"code":"import _objectSpread from\"D:/raju new 1/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"D:/raju new 1/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14;import React,{useState,useEffect}from'react';import styled from'styled-components';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  background: #f8f9fa;\\n  min-height: 100vh;\\n\"])));const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background: white;\\n  padding: 20px;\\n  border-radius: 10px;\\n  margin-bottom: 20px;\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n\"])));const Button=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding: 12px 24px;\\n  background: #667eea;\\n  color: white;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-weight: 600;\\n  \\n  &:hover {\\n    background: #764ba2;\\n  }\\n  \\n  &:disabled {\\n    background: #6c757d;\\n    cursor: not-allowed;\\n  }\\n\"])));const UsersTable=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background: white;\\n  border-radius: 10px;\\n  overflow: hidden;\\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\\n\"])));const TableHeader=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\\n  padding: 15px 20px;\\n  background: #f8f9fa;\\n  font-weight: 600;\\n  border-bottom: 1px solid #e9ecef;\\n\"])));const TableRow=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\\n  padding: 15px 20px;\\n  border-bottom: 1px solid #e9ecef;\\n  align-items: center;\\n  \\n  &:hover {\\n    background: #f8f9fa;\\n  }\\n  \\n  &:last-child {\\n    border-bottom: none;\\n  }\\n\"])));const RoleBadge=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  padding: 4px 12px;\\n  border-radius: 20px;\\n  font-size: 12px;\\n  font-weight: 600;\\n  \\n  &.admin { \\n    background: #667eea; \\n    color: white; \\n  }\\n  &.customer { \\n    background: #e9ecef; \\n    color: #495057; \\n  }\\n\"])));const Loading=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 50px;\\n  font-size: 18px;\\n  color: #666;\\n\"])));const EmptyState=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 50px;\\n  color: #666;\\n\"])));const ErrorMessage=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  background: #f8d7da;\\n  color: #721c24;\\n  padding: 15px;\\n  border-radius: 6px;\\n  margin-bottom: 20px;\\n  border: 1px solid #f5c6cb;\\n\"])));const SuccessMessage=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  background: #d4edda;\\n  color: #155724;\\n  padding: 15px;\\n  border-radius: 6px;\\n  margin-bottom: 20px;\\n  border: 1px solid #c3e6cb;\\n\"])));const SearchContainer=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 15px;\\n  margin-bottom: 20px;\\n  align-items: center;\\n\"])));const SearchInput=styled.input(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  padding: 12px;\\n  border: 1px solid #ddd;\\n  border-radius: 6px;\\n  font-size: 14px;\\n  flex: 1;\\n  max-width: 400px;\\n  \\n  &:focus {\\n    outline: none;\\n    border-color: #667eea;\\n  }\\n\"])));const StatsBar=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 20px;\\n  margin-bottom: 20px;\\n  padding: 15px;\\n  background: white;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\\n\"])));const StatItem=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  \\n  .number {\\n    font-size: 1.5em;\\n    font-weight: bold;\\n    color: #667eea;\\n  }\\n  \\n  .label {\\n    font-size: 12px;\\n    color: #666;\\n    margin-top: 5px;\\n  }\\n\"])));const ActionButton=styled.button(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  padding: 6px 12px;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  font-weight: 600;\\n  margin-right: 5px;\\n  \\n  &.make-admin {\\n    background: #28a745;\\n    color: white;\\n    \\n    &:hover {\\n      background: #218838;\\n    }\\n  }\\n  \\n  &.remove-admin {\\n    background: #dc3545;\\n    color: white;\\n    \\n    &:hover {\\n      background: #c82333;\\n    }\\n  }\\n  \\n  &.delete {\\n    background: #6c757d;\\n    color: white;\\n    \\n    &:hover {\\n      background: #5a6268;\\n    }\\n  }\\n  \\n  &:disabled {\\n    opacity: 0.6;\\n    cursor: not-allowed;\\n  }\\n\"])));const AdminUsers=()=>{const[users,setUsers]=useState([]);const[filteredUsers,setFilteredUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[searchTerm,setSearchTerm]=useState('');const[actionLoading,setActionLoading]=useState(null);const navigate=useNavigate();const getAuthHeader=()=>{const token=localStorage.getItem('adminToken');return token?{Authorization:\"Bearer \".concat(token)}:{};};const fetchUsers=async()=>{try{setLoading(true);setError('');setSuccess('');console.log('üîÑ Fetching users from /api/auth/users...');// Use the correct endpoint from your auth routes\nconst response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/auth/users\"),{headers:getAuthHeader()});console.log('‚úÖ Users API Response:',response.data);if(!response.data){throw new Error('No user data received from server');}// The response should be an array directly from getAllUsers function\nlet usersData=[];if(Array.isArray(response.data)){usersData=response.data;}else{// If it's not an array, try to extract from common properties\nusersData=response.data.users||Object.values(response.data);}if(!Array.isArray(usersData)){throw new Error('Invalid user data format received');}console.log(\"\\uD83D\\uDCCA Loaded \".concat(usersData.length,\" users\"));setUsers(usersData);setFilteredUsers(usersData);setSuccess(\"Successfully loaded \".concat(usersData.length,\" users\"));}catch(error){var _error$response,_error$response2,_error$response3;console.error('‚ùå Error fetching users:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){setError('Authentication failed. Please log in again.');// Redirect to login if token is invalid\nsetTimeout(()=>{localStorage.removeItem('adminToken');navigate('/admin/login');},2000);}else if(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===403){setError('Access denied. Admin privileges required.');}else if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===404){setError('Users endpoint not found. Please check the API URL.');}else{setError(\"Failed to load users: \".concat(error.message));}// Set demo data for development\nconst demoUsers=[{id:'1',username:'johndoe',email:'john@example.com',name:'John Doe',role:'customer',isAdmin:false,createdAt:'2024-01-15T10:30:00Z'},{id:'2',username:'janesmith',email:'jane@example.com',name:'Jane Smith',role:'customer',isAdmin:false,createdAt:'2024-01-20T14:45:00Z'},{id:'3',username:'admin',email:'admin@example.com',name:'Admin User',role:'admin',isAdmin:true,createdAt:'2024-01-10T09:15:00Z'}];setUsers(demoUsers);setFilteredUsers(demoUsers);}finally{setLoading(false);}};useEffect(()=>{fetchUsers();},[]);// Filter users based on search term\nuseEffect(()=>{if(searchTerm.trim()===''){setFilteredUsers(users);}else{const filtered=users.filter(user=>{var _user$username,_user$email,_user$name;return((_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.toLowerCase().includes(searchTerm.toLowerCase()))||((_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.toLowerCase().includes(searchTerm.toLowerCase()))||((_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.toLowerCase().includes(searchTerm.toLowerCase()));});setFilteredUsers(filtered);}},[searchTerm,users]);const toggleAdminStatus=async(userId,currentUser)=>{const currentRole=currentUser.role||(currentUser.isAdmin?'admin':'customer');const newRole=currentRole==='admin'?'customer':'admin';if(!window.confirm(\"Are you sure you want to \".concat(newRole==='admin'?'make this user an admin':'remove admin privileges',\" from \").concat(currentUser.name||currentUser.username,\"?\"))){return;}setActionLoading(userId);try{// Use the correct endpoint from your auth routes\nawait axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/auth/users/\").concat(userId,\"/role\"),{role:newRole},{headers:getAuthHeader()});// Update local state\nsetUsers(prev=>prev.map(user=>user.id===userId?_objectSpread(_objectSpread({},user),{},{role:newRole,isAdmin:newRole==='admin'}):user));setSuccess(\"\\u2705 User role updated successfully! \".concat(currentUser.name||currentUser.username,\" is now \").concat(newRole,\".\"));}catch(error){var _error$response4;console.error('‚ùå Error updating user role:',error);if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===400){setError(error.response.data.error||'Failed to update user role');}else{setError('Failed to update user role. Please try again.');}}finally{setActionLoading(null);}};const deleteUser=async(userId,userName)=>{if(!window.confirm(\"Are you sure you want to delete user \\\"\".concat(userName,\"\\\"? This action cannot be undone.\"))){return;}setActionLoading(userId);try{// Use the correct endpoint from your auth routes\nawait axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/auth/users/\").concat(userId),{headers:getAuthHeader()});// Remove user from local state\nsetUsers(prev=>prev.filter(user=>user.id!==userId));setSuccess(\"\\u2705 User \\\"\".concat(userName,\"\\\" deleted successfully!\"));}catch(error){var _error$response5,_error$response6;console.error('‚ùå Error deleting user:',error);if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)===400){setError(error.response.data.error||'Failed to delete user');}else if(((_error$response6=error.response)===null||_error$response6===void 0?void 0:_error$response6.status)===404){setError('User not found');}else{setError('Failed to delete user. Please try again.');}}finally{setActionLoading(null);}};// Calculate statistics\nconst totalUsers=users.length;const adminUsers=users.filter(user=>user.role==='admin'||user.isAdmin).length;const customerUsers=totalUsers-adminUsers;if(loading){return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDC65 Manage Users\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/admin/dashboard'),children:\"\\u2190 Back to Dashboard\"})]}),/*#__PURE__*/_jsxs(Loading,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\",style:{marginRight:'10px'}}),\"Loading users from database...\"]})]});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDC65 Manage Users\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage customer accounts and administrator privileges\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/admin/dashboard'),children:\"\\u2190 Back to Dashboard\"})]}),error&&/*#__PURE__*/_jsxs(ErrorMessage,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle\",style:{marginRight:'10px'}}),error]}),success&&/*#__PURE__*/_jsxs(SuccessMessage,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle\",style:{marginRight:'10px'}}),success]}),/*#__PURE__*/_jsxs(StatsBar,{children:[/*#__PURE__*/_jsxs(StatItem,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"number\",children:totalUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Total Users\"})]}),/*#__PURE__*/_jsxs(StatItem,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"number\",children:adminUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Administrators\"})]}),/*#__PURE__*/_jsxs(StatItem,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"number\",children:customerUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Customers\"})]})]}),/*#__PURE__*/_jsxs(SearchContainer,{children:[/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"Search users by username, email, or name...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(Button,{onClick:fetchUsers,children:\"\\uD83D\\uDD04 Refresh\"})]}),filteredUsers.length===0?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users\",style:{fontSize:'3em',marginBottom:'20px',opacity:0.5}}),/*#__PURE__*/_jsx(\"h3\",{children:\"No users found\"}),/*#__PURE__*/_jsx(\"p\",{children:searchTerm?\"No users match \\\"\".concat(searchTerm,\"\\\"\"):'No users registered yet. User accounts will appear here when customers register.'})]}):/*#__PURE__*/_jsxs(UsersTable,{children:[/*#__PURE__*/_jsxs(TableHeader,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"User\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Joined\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Actions\"})]}),filteredUsers.map(user=>{const userRole=user.role||(user.isAdmin?'admin':'customer');const isCurrentUser=user.email==='admin@example.com';// You might want to get current admin from token\nreturn/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600'},children:user.name||user.username}),user.name&&user.username!==user.name&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666'},children:[\"@\",user.username]})]}),/*#__PURE__*/_jsx(\"div\",{children:user.email}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(RoleBadge,{className:userRole,children:userRole})}),/*#__PURE__*/_jsx(\"div\",{children:user.createdAt?new Date(user.createdAt).toLocaleDateString():'N/A'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ActionButton,{className:userRole==='admin'?'remove-admin':'make-admin',onClick:()=>toggleAdminStatus(user.id,user),disabled:actionLoading===user.id||isCurrentUser,children:actionLoading===user.id?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}):userRole==='admin'?'Remove Admin':'Make Admin'}),/*#__PURE__*/_jsx(ActionButton,{className:\"delete\",onClick:()=>deleteUser(user.id,user.name||user.username),disabled:actionLoading===user.id||userRole==='admin'||isCurrentUser,title:userRole==='admin'?'Cannot delete admin users':'',children:\"Delete\"})]})]},user.id);})]})]});};export default AdminUsers;","map":{"version":3,"names":["React","useState","useEffect","styled","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Header","_templateObject2","Button","button","_templateObject3","UsersTable","_templateObject4","TableHeader","_templateObject5","TableRow","_templateObject6","RoleBadge","span","_templateObject7","Loading","_templateObject8","EmptyState","_templateObject9","ErrorMessage","_templateObject0","SuccessMessage","_templateObject1","SearchContainer","_templateObject10","SearchInput","input","_templateObject11","StatsBar","_templateObject12","StatItem","_templateObject13","ActionButton","_templateObject14","AdminUsers","users","setUsers","filteredUsers","setFilteredUsers","loading","setLoading","error","setError","success","setSuccess","searchTerm","setSearchTerm","actionLoading","setActionLoading","navigate","getAuthHeader","token","localStorage","getItem","Authorization","concat","fetchUsers","console","log","response","get","process","env","REACT_APP_API_URL","headers","data","Error","usersData","Array","isArray","Object","values","length","_error$response","_error$response2","_error$response3","status","setTimeout","removeItem","message","demoUsers","id","username","email","name","role","isAdmin","createdAt","trim","filtered","filter","user","_user$username","_user$email","_user$name","toLowerCase","includes","toggleAdminStatus","userId","currentUser","currentRole","newRole","window","confirm","put","prev","map","_objectSpread","_error$response4","deleteUser","userName","delete","_error$response5","_error$response6","totalUsers","adminUsers","customerUsers","children","onClick","className","style","marginRight","type","placeholder","value","onChange","e","target","fontSize","marginBottom","opacity","userRole","isCurrentUser","fontWeight","color","Date","toLocaleDateString","disabled","title"],"sources":["D:/raju new 1/front-end/src/admin/pages/Users.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Container = styled.div`\r\n  padding: 20px;\r\n  background: #f8f9fa;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 12px 24px;\r\n  background: #667eea;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  \r\n  &:hover {\r\n    background: #764ba2;\r\n  }\r\n  \r\n  &:disabled {\r\n    background: #6c757d;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst UsersTable = styled.div`\r\n  background: white;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n`;\r\n\r\nconst TableHeader = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\r\n  padding: 15px 20px;\r\n  background: #f8f9fa;\r\n  font-weight: 600;\r\n  border-bottom: 1px solid #e9ecef;\r\n`;\r\n\r\nconst TableRow = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\r\n  padding: 15px 20px;\r\n  border-bottom: 1px solid #e9ecef;\r\n  align-items: center;\r\n  \r\n  &:hover {\r\n    background: #f8f9fa;\r\n  }\r\n  \r\n  &:last-child {\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nconst RoleBadge = styled.span`\r\n  padding: 4px 12px;\r\n  border-radius: 20px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  \r\n  &.admin { \r\n    background: #667eea; \r\n    color: white; \r\n  }\r\n  &.customer { \r\n    background: #e9ecef; \r\n    color: #495057; \r\n  }\r\n`;\r\n\r\nconst Loading = styled.div`\r\n  text-align: center;\r\n  padding: 50px;\r\n  font-size: 18px;\r\n  color: #666;\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  padding: 50px;\r\n  color: #666;\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n  padding: 15px;\r\n  border-radius: 6px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #f5c6cb;\r\n`;\r\n\r\nconst SuccessMessage = styled.div`\r\n  background: #d4edda;\r\n  color: #155724;\r\n  padding: 15px;\r\n  border-radius: 6px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #c3e6cb;\r\n`;\r\n\r\nconst SearchContainer = styled.div`\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n  align-items: center;\r\n`;\r\n\r\nconst SearchInput = styled.input`\r\n  padding: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  flex: 1;\r\n  max-width: 400px;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n  }\r\n`;\r\n\r\nconst StatsBar = styled.div`\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n  padding: 15px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n`;\r\n\r\nconst StatItem = styled.div`\r\n  text-align: center;\r\n  \r\n  .number {\r\n    font-size: 1.5em;\r\n    font-weight: bold;\r\n    color: #667eea;\r\n  }\r\n  \r\n  .label {\r\n    font-size: 12px;\r\n    color: #666;\r\n    margin-top: 5px;\r\n  }\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  padding: 6px 12px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  margin-right: 5px;\r\n  \r\n  &.make-admin {\r\n    background: #28a745;\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background: #218838;\r\n    }\r\n  }\r\n  \r\n  &.remove-admin {\r\n    background: #dc3545;\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background: #c82333;\r\n    }\r\n  }\r\n  \r\n  &.delete {\r\n    background: #6c757d;\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background: #5a6268;\r\n    }\r\n  }\r\n  \r\n  &:disabled {\r\n    opacity: 0.6;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst AdminUsers = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [filteredUsers, setFilteredUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [actionLoading, setActionLoading] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const getAuthHeader = () => {\r\n    const token = localStorage.getItem('adminToken');\r\n    return token ? { Authorization: `Bearer ${token}` } : {};\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      setSuccess('');\r\n\r\n      console.log('üîÑ Fetching users from /api/auth/users...');\r\n\r\n      // Use the correct endpoint from your auth routes\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/api/auth/users`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n\r\n      console.log('‚úÖ Users API Response:', response.data);\r\n\r\n      if (!response.data) {\r\n        throw new Error('No user data received from server');\r\n      }\r\n\r\n      // The response should be an array directly from getAllUsers function\r\n      let usersData = [];\r\n      if (Array.isArray(response.data)) {\r\n        usersData = response.data;\r\n      } else {\r\n        // If it's not an array, try to extract from common properties\r\n        usersData = response.data.users || Object.values(response.data);\r\n      }\r\n\r\n      if (!Array.isArray(usersData)) {\r\n        throw new Error('Invalid user data format received');\r\n      }\r\n\r\n      console.log(`üìä Loaded ${usersData.length} users`);\r\n      setUsers(usersData);\r\n      setFilteredUsers(usersData);\r\n      setSuccess(`Successfully loaded ${usersData.length} users`);\r\n\r\n    } catch (error) {\r\n      console.error('‚ùå Error fetching users:', error);\r\n      \r\n      if (error.response?.status === 401) {\r\n        setError('Authentication failed. Please log in again.');\r\n        // Redirect to login if token is invalid\r\n        setTimeout(() => {\r\n          localStorage.removeItem('adminToken');\r\n          navigate('/admin/login');\r\n        }, 2000);\r\n      } else if (error.response?.status === 403) {\r\n        setError('Access denied. Admin privileges required.');\r\n      } else if (error.response?.status === 404) {\r\n        setError('Users endpoint not found. Please check the API URL.');\r\n      } else {\r\n        setError(`Failed to load users: ${error.message}`);\r\n      }\r\n      \r\n      // Set demo data for development\r\n      const demoUsers = [\r\n        {\r\n          id: '1',\r\n          username: 'johndoe',\r\n          email: 'john@example.com',\r\n          name: 'John Doe',\r\n          role: 'customer',\r\n          isAdmin: false,\r\n          createdAt: '2024-01-15T10:30:00Z'\r\n        },\r\n        {\r\n          id: '2',\r\n          username: 'janesmith',\r\n          email: 'jane@example.com', \r\n          name: 'Jane Smith',\r\n          role: 'customer',\r\n          isAdmin: false,\r\n          createdAt: '2024-01-20T14:45:00Z'\r\n        },\r\n        {\r\n          id: '3',\r\n          username: 'admin',\r\n          email: 'admin@example.com',\r\n          name: 'Admin User',\r\n          role: 'admin',\r\n          isAdmin: true,\r\n          createdAt: '2024-01-10T09:15:00Z'\r\n        }\r\n      ];\r\n      setUsers(demoUsers);\r\n      setFilteredUsers(demoUsers);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  // Filter users based on search term\r\n  useEffect(() => {\r\n    if (searchTerm.trim() === '') {\r\n      setFilteredUsers(users);\r\n    } else {\r\n      const filtered = users.filter(user =>\r\n        user.username?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        user.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        user.name?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n      setFilteredUsers(filtered);\r\n    }\r\n  }, [searchTerm, users]);\r\n\r\n  const toggleAdminStatus = async (userId, currentUser) => {\r\n    const currentRole = currentUser.role || (currentUser.isAdmin ? 'admin' : 'customer');\r\n    const newRole = currentRole === 'admin' ? 'customer' : 'admin';\r\n    \r\n    if (!window.confirm(`Are you sure you want to ${newRole === 'admin' ? 'make this user an admin' : 'remove admin privileges'} from ${currentUser.name || currentUser.username}?`)) {\r\n      return;\r\n    }\r\n\r\n    setActionLoading(userId);\r\n\r\n    try {\r\n      // Use the correct endpoint from your auth routes\r\n      await axios.put(\r\n        `${process.env.REACT_APP_API_URL}/api/auth/users/${userId}/role`,\r\n        { role: newRole },\r\n        { headers: getAuthHeader() }\r\n      );\r\n\r\n      // Update local state\r\n      setUsers(prev => prev.map(user => \r\n        user.id === userId ? { \r\n          ...user, \r\n          role: newRole, \r\n          isAdmin: newRole === 'admin' \r\n        } : user\r\n      ));\r\n      \r\n      setSuccess(`‚úÖ User role updated successfully! ${currentUser.name || currentUser.username} is now ${newRole}.`);\r\n\r\n    } catch (error) {\r\n      console.error('‚ùå Error updating user role:', error);\r\n      \r\n      if (error.response?.status === 400) {\r\n        setError(error.response.data.error || 'Failed to update user role');\r\n      } else {\r\n        setError('Failed to update user role. Please try again.');\r\n      }\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const deleteUser = async (userId, userName) => {\r\n    if (!window.confirm(`Are you sure you want to delete user \"${userName}\"? This action cannot be undone.`)) {\r\n      return;\r\n    }\r\n\r\n    setActionLoading(userId);\r\n\r\n    try {\r\n      // Use the correct endpoint from your auth routes\r\n      await axios.delete(\r\n        `${process.env.REACT_APP_API_URL}/api/auth/users/${userId}`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      \r\n      // Remove user from local state\r\n      setUsers(prev => prev.filter(user => user.id !== userId));\r\n      setSuccess(`‚úÖ User \"${userName}\" deleted successfully!`);\r\n    } catch (error) {\r\n      console.error('‚ùå Error deleting user:', error);\r\n      \r\n      if (error.response?.status === 400) {\r\n        setError(error.response.data.error || 'Failed to delete user');\r\n      } else if (error.response?.status === 404) {\r\n        setError('User not found');\r\n      } else {\r\n        setError('Failed to delete user. Please try again.');\r\n      }\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  // Calculate statistics\r\n  const totalUsers = users.length;\r\n  const adminUsers = users.filter(user => user.role === 'admin' || user.isAdmin).length;\r\n  const customerUsers = totalUsers - adminUsers;\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <Header>\r\n          <h1>üë• Manage Users</h1>\r\n          <Button onClick={() => navigate('/admin/dashboard')}>\r\n            ‚Üê Back to Dashboard\r\n          </Button>\r\n        </Header>\r\n        <Loading>\r\n          <i className=\"fas fa-spinner fa-spin\" style={{ marginRight: '10px' }}></i>\r\n          Loading users from database...\r\n        </Loading>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <div>\r\n          <h1>üë• Manage Users</h1>\r\n          <p>Manage customer accounts and administrator privileges</p>\r\n        </div>\r\n        <Button onClick={() => navigate('/admin/dashboard')}>\r\n          ‚Üê Back to Dashboard\r\n        </Button>\r\n      </Header>\r\n\r\n      {error && (\r\n        <ErrorMessage>\r\n          <i className=\"fas fa-exclamation-triangle\" style={{ marginRight: '10px' }}></i>\r\n          {error}\r\n        </ErrorMessage>\r\n      )}\r\n\r\n      {success && (\r\n        <SuccessMessage>\r\n          <i className=\"fas fa-check-circle\" style={{ marginRight: '10px' }}></i>\r\n          {success}\r\n        </SuccessMessage>\r\n      )}\r\n\r\n      <StatsBar>\r\n        <StatItem>\r\n          <div className=\"number\">{totalUsers}</div>\r\n          <div className=\"label\">Total Users</div>\r\n        </StatItem>\r\n        <StatItem>\r\n          <div className=\"number\">{adminUsers}</div>\r\n          <div className=\"label\">Administrators</div>\r\n        </StatItem>\r\n        <StatItem>\r\n          <div className=\"number\">{customerUsers}</div>\r\n          <div className=\"label\">Customers</div>\r\n        </StatItem>\r\n      </StatsBar>\r\n\r\n      <SearchContainer>\r\n        <SearchInput\r\n          type=\"text\"\r\n          placeholder=\"Search users by username, email, or name...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n        />\r\n        <Button onClick={fetchUsers}>\r\n          üîÑ Refresh\r\n        </Button>\r\n      </SearchContainer>\r\n\r\n      {filteredUsers.length === 0 ? (\r\n        <EmptyState>\r\n          <i className=\"fas fa-users\" style={{ fontSize: '3em', marginBottom: '20px', opacity: 0.5 }}></i>\r\n          <h3>No users found</h3>\r\n          <p>\r\n            {searchTerm ? \r\n              `No users match \"${searchTerm}\"` : \r\n              'No users registered yet. User accounts will appear here when customers register.'\r\n            }\r\n          </p>\r\n        </EmptyState>\r\n      ) : (\r\n        <UsersTable>\r\n          <TableHeader>\r\n            <div>User</div>\r\n            <div>Email</div>\r\n            <div>Role</div>\r\n            <div>Joined</div>\r\n            <div>Actions</div>\r\n          </TableHeader>\r\n          \r\n          {filteredUsers.map((user) => {\r\n            const userRole = user.role || (user.isAdmin ? 'admin' : 'customer');\r\n            const isCurrentUser = user.email === 'admin@example.com'; // You might want to get current admin from token\r\n            \r\n            return (\r\n              <TableRow key={user.id}>\r\n                <div>\r\n                  <div style={{ fontWeight: '600' }}>{user.name || user.username}</div>\r\n                  {user.name && user.username !== user.name && (\r\n                    <div style={{ fontSize: '12px', color: '#666' }}>@{user.username}</div>\r\n                  )}\r\n                </div>\r\n                <div>{user.email}</div>\r\n                <div>\r\n                  <RoleBadge className={userRole}>\r\n                    {userRole}\r\n                  </RoleBadge>\r\n                </div>\r\n                <div>\r\n                  {user.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A'}\r\n                </div>\r\n                <div>\r\n                  <ActionButton\r\n                    className={userRole === 'admin' ? 'remove-admin' : 'make-admin'}\r\n                    onClick={() => toggleAdminStatus(user.id, user)}\r\n                    disabled={actionLoading === user.id || isCurrentUser}\r\n                  >\r\n                    {actionLoading === user.id ? (\r\n                      <i className=\"fas fa-spinner fa-spin\"></i>\r\n                    ) : userRole === 'admin' ? (\r\n                      'Remove Admin'\r\n                    ) : (\r\n                      'Make Admin'\r\n                    )}\r\n                  </ActionButton>\r\n                  \r\n                  <ActionButton\r\n                    className=\"delete\"\r\n                    onClick={() => deleteUser(user.id, user.name || user.username)}\r\n                    disabled={actionLoading === user.id || userRole === 'admin' || isCurrentUser}\r\n                    title={userRole === 'admin' ? 'Cannot delete admin users' : ''}\r\n                  >\r\n                    Delete\r\n                  </ActionButton>\r\n                </div>\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </UsersTable>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AdminUsers;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}