{"ast":null,"code":"import _objectSpread from\"D:/raju new 1/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"D:/raju new 1/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29,_templateObject30,_templateObject31,_templateObject32,_templateObject33,_templateObject34,_templateObject35,_templateObject36,_templateObject37,_templateObject38,_templateObject39,_templateObject40,_templateObject41,_templateObject42;import React,{useState,useEffect,useCallback}from\"react\";import styled from\"styled-components\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{loadStripe}from\"@stripe/stripe-js\";import{Elements,CardNumberElement,CardExpiryElement,CardCvcElement,useStripe,useElements}from\"@stripe/react-stripe-js\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const stripePromise=loadStripe(\"pk_test_51SEWfbGUJ7v3D9GXVs5sPIBEY08wZrpGmeuko8YClRovgbeQkkYJ2NpxLMtM3RyA8v7NSKM4cE8mTLthWafiYGv500lPgVJb3n\");// ========== MOBILE RESPONSIVE STYLED COMPONENTS ==========\nconst Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  min-height: 100vh;\\n\"])));const Wrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  max-width: 1200px;\\n  margin: 0 auto;\\n  \\n  @media (max-width: 768px) {\\n    padding: 10px;\\n  }\\n\"])));const Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-weight: 300;\\n  text-align: center;\\n  font-size: 1.8rem;\\n  margin-bottom: 20px;\\n  \\n  @media (max-width: 768px) {\\n    font-size: 1.5rem;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    font-size: 1.3rem;\\n    margin-bottom: 15px;\\n  }\\n\"])));const Top=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 20px;\\n  flex-wrap: wrap;\\n  gap: 15px;\\n  \\n  @media (max-width: 768px) {\\n    padding: 15px 10px;\\n    justify-content: center;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    flex-direction: column;\\n    gap: 10px;\\n    padding: 10px 5px;\\n  }\\n\"])));const TopButton=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  padding: 12px 20px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  border: \",\";\\n  background-color: \",\";\\n  color: \",\";\\n  border-radius: 8px;\\n  font-size: 14px;\\n  min-height: 44px;\\n  transition: all 0.3s ease;\\n  \\n  &:hover {\\n    transform: translateY(-2px);\\n  }\\n  \\n  &:disabled {\\n    background-color: #ccc;\\n    cursor: not-allowed;\\n    transform: none;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    padding: 10px 16px;\\n    font-size: 13px;\\n    min-height: 40px;\\n    width: 100%;\\n    max-width: 200px;\\n  }\\n\"])),props=>props.type===\"filled\"?\"none\":\"2px solid black\",props=>props.type===\"filled\"?\"black\":\"transparent\",props=>props.type===\"filled\"?\"white\":\"black\");const TopTexts=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 15px;\\n  \\n  @media (max-width: 480px) {\\n    gap: 10px;\\n    justify-content: center;\\n    width: 100%;\\n  }\\n\"])));const TopText=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  text-decoration: underline;\\n  cursor: pointer;\\n  font-size: 14px;\\n  \\n  @media (max-width: 480px) {\\n    font-size: 13px;\\n  }\\n\"])));const Bottom=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  gap: 30px;\\n  \\n  @media (max-width: 768px) {\\n    flex-direction: column;\\n    gap: 20px;\\n  }\\n\"])));const Info=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  flex: 3;\\n\"])));const Product=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 20px;\\n  gap: 20px;\\n  padding: 15px;\\n  border: 1px solid #f0f0f0;\\n  border-radius: 10px;\\n  \\n  @media (max-width: 768px) {\\n    flex-direction: column;\\n    gap: 15px;\\n    padding: 12px;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    padding: 10px;\\n    gap: 12px;\\n  }\\n\"])));const ProductDetail=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  flex: 2;\\n  display: flex;\\n  gap: 15px;\\n  \\n  @media (max-width: 480px) {\\n    flex-direction: column;\\n    text-align: center;\\n    gap: 10px;\\n  }\\n\"])));const Image=styled.img(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  width: 200px;\\n  height: 200px;\\n  object-fit: cover;\\n  border-radius: 8px;\\n  \\n  @media (max-width: 768px) {\\n    width: 150px;\\n    height: 150px;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    width: 100%;\\n    max-width: 250px;\\n    height: 180px;\\n    margin: 0 auto;\\n  }\\n\"])));const Details=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  padding: 10px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n  flex: 1;\\n  \\n  @media (max-width: 480px) {\\n    padding: 8px 0;\\n    gap: 8px;\\n  }\\n\"])));const ProductName=styled.span(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  font-size: 16px;\\n  font-weight: 500;\\n  line-height: 1.4;\\n  \\n  @media (max-width: 480px) {\\n    font-size: 15px;\\n  }\\n\"])));const ProductId=styled.span(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  color: gray;\\n  font-size: 12px;\\n\"])));const PriceDetail=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 15px;\\n  \\n  @media (max-width: 768px) {\\n    flex-direction: row;\\n    justify-content: space-between;\\n    align-items: center;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    gap: 12px;\\n  }\\n\"])));const ProductAmountContainer=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n\"])));const ProductAmount=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  font-size: 20px;\\n  margin: 0 10px;\\n  min-width: 30px;\\n  text-align: center;\\n  \\n  @media (max-width: 480px) {\\n    font-size: 18px;\\n  }\\n\"])));const ProductPrice=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  font-size: 24px;\\n  font-weight: 200;\\n  \\n  @media (max-width: 480px) {\\n    font-size: 20px;\\n  }\\n\"])));const Hr=styled.hr(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  background-color: #eee;\\n  border: none;\\n  height: 1px;\\n  margin: 20px 0;\\n\"])));const Summary=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  border: 0.5px solid lightgray;\\n  border-radius: 10px;\\n  padding: 20px;\\n  height: fit-content;\\n  position: sticky;\\n  top: 20px;\\n  \\n  @media (max-width: 768px) {\\n    position: static;\\n    margin-top: 20px;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    padding: 15px;\\n    margin-top: 15px;\\n  }\\n\"])));const SummaryTitle=styled.h1(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  font-weight: 200;\\n  font-size: 1.5rem;\\n  margin-bottom: 20px;\\n  \\n  @media (max-width: 480px) {\\n    font-size: 1.25rem;\\n    margin-bottom: 15px;\\n  }\\n\"])));const SummaryItem=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  margin: 20px 0px;\\n  display: flex;\\n  justify-content: space-between;\\n  font-weight: \",\";\\n  font-size: \",\";\\n  \\n  @media (max-width: 480px) {\\n    margin: 15px 0px;\\n    font-size: \",\";\\n  }\\n\"])),props=>props.type===\"total\"&&\"500\",props=>props.type===\"total\"?\"20px\":\"16px\",props=>props.type===\"total\"?\"18px\":\"14px\");const SummaryItemText=styled.span(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\"])));const SummaryItemPrice=styled.span(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\"])));const Button=styled.button(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 15px;\\n  background-color: black;\\n  color: white;\\n  font-weight: 600;\\n  border: none;\\n  cursor: pointer;\\n  margin-top: 10px;\\n  border-radius: 8px;\\n  font-size: 16px;\\n  min-height: 50px;\\n  transition: all 0.3s ease;\\n  \\n  &:hover {\\n    background-color: #333;\\n  }\\n  \\n  &:disabled {\\n    background-color: #ccc;\\n    cursor: not-allowed;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    padding: 12px;\\n    font-size: 14px;\\n    min-height: 44px;\\n  }\\n\"])));const QuantityButton=styled.button(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  width: 35px;\\n  height: 35px;\\n  border: 1px solid teal;\\n  background-color: white;\\n  cursor: pointer;\\n  font-size: 16px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  border-radius: 4px;\\n  min-height: 35px;\\n  transition: all 0.2s ease;\\n  \\n  &:hover {\\n    background-color: #f0f0f0;\\n  }\\n  \\n  @media (max-width: 480px) {\\n    width: 30px;\\n    height: 30px;\\n    font-size: 14px;\\n  }\\n\"])));const EmptyCart=styled.div(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 50px;\\n  font-size: 18px;\\n  color: gray;\\n  \\n  @media (max-width: 480px) {\\n    padding: 30px 20px;\\n    font-size: 16px;\\n  }\\n\"])));const AddressForm=styled.div(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\n  margin: 20px 0;\\n  padding: 20px;\\n  border: 1px solid #eee;\\n  border-radius: 10px;\\n  background-color: #f9f9f9;\\n  \\n  @media (max-width: 480px) {\\n    padding: 15px;\\n    margin: 15px 0;\\n  }\\n\"])));const Input=styled.input(_templateObject28||(_templateObject28=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 12px;\\n  margin: 8px 0;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  font-size: 14px;\\n  \\n  @media (max-width: 480px) {\\n    padding: 10px;\\n    font-size: 16px; /* Prevents zoom on iOS */\\n  }\\n\"])));const InputRow=styled.div(_templateObject29||(_templateObject29=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 10px;\\n  \\n  @media (max-width: 768px) {\\n    flex-direction: column;\\n  }\\n\"])));const InputGroup=styled.div(_templateObject30||(_templateObject30=_taggedTemplateLiteral([\"\\n  flex: 1;\\n\"])));const PaymentModal=styled.div(_templateObject31||(_templateObject31=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  z-index: 1000;\\n  padding: 20px;\\n  \\n  @media (max-width: 480px) {\\n    padding: 10px;\\n    align-items: flex-start;\\n    padding-top: 50px;\\n  }\\n\"])));const PaymentContent=styled.div(_templateObject32||(_templateObject32=_taggedTemplateLiteral([\"\\n  background: white;\\n  padding: 2rem;\\n  border-radius: 12px;\\n  width: 90%;\\n  max-width: 500px;\\n  text-align: center;\\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\\n  max-height: 90vh;\\n  overflow-y: auto;\\n  \\n  @media (max-width: 480px) {\\n    padding: 1.5rem;\\n    max-height: 80vh;\\n  }\\n\"])));const PayNowBtn=styled.button(_templateObject33||(_templateObject33=_taggedTemplateLiteral([\"\\n  background: #4CAF50;\\n  color: white;\\n  padding: 12px 24px;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  margin: 5px;\\n  font-size: 16px;\\n  font-weight: 600;\\n  width: 100%;\\n  transition: background 0.3s;\\n\\n  &:hover {\\n    background: #45a049;\\n  }\\n\\n  &:disabled {\\n    background: #cccccc;\\n    cursor: not-allowed;\\n  }\\n\"])));const CancelBtn=styled.button(_templateObject34||(_templateObject34=_taggedTemplateLiteral([\"\\n  background: #f44336;\\n  color: white;\\n  padding: 12px 24px;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  margin: 5px;\\n  font-size: 16px;\\n  font-weight: 600;\\n  width: 100%;\\n  transition: background 0.3s;\\n\\n  &:hover {\\n    background: #da190b;\\n  }\\n\"])));const ErrorMessage=styled.div(_templateObject35||(_templateObject35=_taggedTemplateLiteral([\"\\n  color: #d32f2f;\\n  background-color: #ffebee;\\n  padding: 12px;\\n  border-radius: 6px;\\n  margin: 15px 0;\\n  font-size: 14px;\\n  border: 1px solid #f5c6cb;\\n\"])));const SuccessMessage=styled.div(_templateObject36||(_templateObject36=_taggedTemplateLiteral([\"\\n  color: #155724;\\n  background-color: #d4edda;\\n  padding: 12px;\\n  border-radius: 6px;\\n  margin: 15px 0;\\n  font-size: 14px;\\n  border: 1px solid #c3e6cb;\\n\"])));const CardFormContainer=styled.div(_templateObject37||(_templateObject37=_taggedTemplateLiteral([\"\\n  margin: 20px 0;\\n  text-align: left;\\n\"])));const CardFieldContainer=styled.div(_templateObject38||(_templateObject38=_taggedTemplateLiteral([\"\\n  margin-bottom: 15px;\\n\"])));const CardFieldLabel=styled.label(_templateObject39||(_templateObject39=_taggedTemplateLiteral([\"\\n  display: block;\\n  margin-bottom: 5px;\\n  font-weight: 600;\\n  color: #333;\\n  font-size: 14px;\\n\"])));const CardFieldWrapper=styled.div(_templateObject40||(_templateObject40=_taggedTemplateLiteral([\"\\n  padding: 12px;\\n  border: 2px solid #e1e5e9;\\n  border-radius: 8px;\\n  background: white;\\n  transition: border-color 0.3s;\\n  \\n  &:focus-within {\\n    border-color: #4CAF50;\\n    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.1);\\n  }\\n\"])));const CardRow=styled.div(_templateObject41||(_templateObject41=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 15px;\\n  \\n  @media (max-width: 480px) {\\n    grid-template-columns: 1fr;\\n  }\\n\"])));const LoadingSpinner=styled.div(_templateObject42||(_templateObject42=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 20px;\\n  color: #666;\\n\"])));// ========== STRIPE PAYMENT FORM COMPONENT ==========\nconst StripePaymentForm=_ref=>{let{amount,clientSecret,onSuccess,onError}=_ref;const stripe=useStripe();const elements=useElements();const[processing,setProcessing]=useState(false);const[error,setError]=useState('');const handleSubmit=async event=>{event.preventDefault();if(!stripe||!elements){return;}setProcessing(true);setError('');try{const cardNumber=elements.getElement(CardNumberElement);const{error:stripeError,paymentMethod}=await stripe.createPaymentMethod({type:'card',card:cardNumber});if(stripeError){setError(stripeError.message);onError(stripeError.message);return;}console.log('🔄 Confirming card payment...');const{error:confirmError,paymentIntent}=await stripe.confirmCardPayment(clientSecret,{payment_method:paymentMethod.id});if(confirmError){setError(confirmError.message);onError(confirmError.message);}else if(paymentIntent.status==='succeeded'){console.log('✅ Payment successful!');onSuccess(paymentIntent);}else{setError(\"Payment status: \".concat(paymentIntent.status));onError(\"Payment status: \".concat(paymentIntent.status));}}catch(err){console.error('❌ Payment error:',err);setError('Payment failed. Please try again.');onError(err.message);}finally{setProcessing(false);}};const cardElementOptions={style:{base:{fontSize:'16px',color:'#424770',fontFamily:'\"Helvetica Neue\", Helvetica, sans-serif','::placeholder':{color:'#aab7c4'},backgroundColor:'transparent'},invalid:{color:'#9e2146',iconColor:'#9e2146'}}};return/*#__PURE__*/_jsxs(CardFormContainer,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'15px',color:'#333'},children:\"Payment Details\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'18px',fontWeight:'600',color:'#2c5aa0',marginBottom:'20px'},children:[\"Total Amount: \",/*#__PURE__*/_jsxs(\"span\",{style:{color:'#4CAF50'},children:[\"$\",amount]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(CardFieldContainer,{children:[/*#__PURE__*/_jsx(CardFieldLabel,{children:\"Card Number\"}),/*#__PURE__*/_jsx(CardFieldWrapper,{children:/*#__PURE__*/_jsx(CardNumberElement,{options:_objectSpread(_objectSpread({},cardElementOptions),{},{placeholder:'1234 1234 1234 1234'})})})]}),/*#__PURE__*/_jsxs(CardRow,{children:[/*#__PURE__*/_jsxs(CardFieldContainer,{children:[/*#__PURE__*/_jsx(CardFieldLabel,{children:\"Expiry Date\"}),/*#__PURE__*/_jsx(CardFieldWrapper,{children:/*#__PURE__*/_jsx(CardExpiryElement,{options:_objectSpread(_objectSpread({},cardElementOptions),{},{placeholder:'MM/YY'})})})]}),/*#__PURE__*/_jsxs(CardFieldContainer,{children:[/*#__PURE__*/_jsx(CardFieldLabel,{children:\"CVC\"}),/*#__PURE__*/_jsx(CardFieldWrapper,{children:/*#__PURE__*/_jsx(CardCvcElement,{options:_objectSpread(_objectSpread({},cardElementOptions),{},{placeholder:'123'})})})]})]}),error&&/*#__PURE__*/_jsxs(ErrorMessage,{style:{textAlign:'left'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsx(PayNowBtn,{type:\"submit\",disabled:!stripe||processing,children:processing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px'},children:\"\\u23F3\"}),\"Processing Payment...\"]}):\"Pay $\".concat(amount)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',padding:'15px',background:'#f8f9fa',borderRadius:'8px',fontSize:'13px',textAlign:'left',border:'1px solid #e9ecef'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0',color:'#495057',fontSize:'14px'},children:\"\\uD83E\\uDDEA Test Card Information\"}),/*#__PURE__*/_jsxs(\"div\",{style:{lineHeight:'1.6',color:'#6c757d'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Card Number:\"}),\" 4242 4242 4242 4242\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Expiry Date:\"}),\" 12/34\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"CVC:\"}),\" 123\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ZIP Code:\"}),\" 12345\"]})]})]})]});};// ========== MAIN CART PAGE COMPONENT ==========\nconst CartPage=()=>{const[cartItems,setCartItems]=useState([]);const[loading,setLoading]=useState(false);const[isCheckingOut,setIsCheckingOut]=useState(false);const[showAddressForm,setShowAddressForm]=useState(false);const[showPayment,setShowPayment]=useState(false);const[paymentError,setPaymentError]=useState('');const[paymentSuccess,setPaymentSuccess]=useState('');const[clientSecret,setClientSecret]=useState('');const[currentOrderId,setCurrentOrderId]=useState('');const navigate=useNavigate();const[address,setAddress]=useState({street:\"\",city:\"\",state:\"\",zipCode:\"\",country:\"United States\"});// Helper Functions\nconst getAuthHeader=()=>{const token=localStorage.getItem('token');return token?{Authorization:\"Bearer \".concat(token)}:{};};const getCurrentUser=()=>{const token=localStorage.getItem('token');if(token){try{const base64Payload=token.split('.')[1];const payload=JSON.parse(atob(base64Payload));return payload.userId;}catch(error){return null;}}return null;};const calculateShipping=()=>{const subtotal=getTotal();if(subtotal>=50){return{shipping:0,hasFreeShipping:true};}else{return{shipping:5.90,hasFreeShipping:false};}};const getTotal=()=>{return cartItems.reduce((total,item)=>total+parseFloat(item.price)*item.quantity,0);};const getFinalTotal=()=>{const shippingInfo=calculateShipping();return getTotal()+shippingInfo.shipping;};// SIMPLE CART CLEARING - NO COMPLEX LOGIC\nconst clearCartAfterPayment=async()=>{const userId=getCurrentUser();if(!userId){console.log('❌ No user ID for cart clearing');return false;}try{console.log('🛒 FORCE CLEARING CART...');// Clear backend cart\nconst response=await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/\").concat(userId,\"/clear\"),{headers:getAuthHeader(),timeout:10000});console.log('✅ Backend cart clear response:',response.data);// ALWAYS CLEAR LOCAL STATE\nsetCartItems([]);console.log('✅ Cart cleared successfully');return true;}catch(error){console.error('❌ Backend cart clear failed:',error);// STILL CLEAR LOCALLY EVEN IF BACKEND FAILS\nsetCartItems([]);return true;}};const fetchCart=useCallback(async()=>{const userId=getCurrentUser();if(!userId){setCartItems([]);return;}try{setLoading(true);console.log('🔄 Fetching cart...');const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/\").concat(userId),{headers:getAuthHeader()});console.log('✅ Cart data received:',response.data.length,'items');setCartItems(response.data);}catch(error){console.error('Error fetching cart:',error);setCartItems([]);}finally{setLoading(false);}},[]);const updateCartItem=async(productId,quantity)=>{const userId=getCurrentUser();if(!userId)return;try{await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/\").concat(userId),{productId,quantity},{headers:getAuthHeader()});await fetchCart();}catch(error){console.error('Error updating cart:',error);}};const removeFromCart=async productId=>{const userId=getCurrentUser();if(!userId)return;try{await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/\").concat(userId,\"/\").concat(productId),{headers:getAuthHeader()});await fetchCart();}catch(error){console.error('Error removing from cart:',error);}};// Fetch cart on component mount\nuseEffect(()=>{console.log('🔍 CartPage mounted - fetching cart');fetchCart();},[fetchCart]);const handleQuantity=(productId,quantity)=>{if(quantity===0){removeFromCart(productId);}else{updateCartItem(productId,quantity);}};const handlePayment=async()=>{setPaymentError('');setPaymentSuccess('');setIsCheckingOut(true);try{const userId=getCurrentUser();const token=localStorage.getItem('token');const BASE_URL=process.env.REACT_APP_API_URL;// Validate address first\nif(!address.street||!address.city||!address.state||!address.zipCode||!address.country){throw new Error('Please fill in all address fields');}// Validate cart items\nif(cartItems.length===0){throw new Error('Cart is empty');}console.log('🔄 Starting payment process...');console.log('📦 Cart items:',cartItems);console.log('🏠 Address:',address);console.log('💰 Total amount:',getFinalTotal());// Step 1: Create order\nconst orderData={cartItems:cartItems.map(item=>({productId:item.productId||item.id,title:item.title||item.name,price:parseFloat(item.price),quantity:item.quantity,size:item.size||'One Size',color:item.color||'Default',img:item.img||item.image})),address:address,totalAmount:getFinalTotal()};console.log('📦 Creating order with data:',orderData);const orderResponse=await axios.post(\"\".concat(BASE_URL,\"/api/orders\"),orderData,{headers:{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'},timeout:10000});console.log('✅ Order creation response:',orderResponse.data);if(!orderResponse.data.order||!orderResponse.data.order.id){throw new Error('Order creation failed - no order ID returned');}const createdOrderId=orderResponse.data.order.id;setCurrentOrderId(createdOrderId);console.log('✅ Order created successfully:',createdOrderId);// Step 2: Create payment intent with the order ID\nconst amount=Math.round(getFinalTotal()*100);console.log('💳 Creating payment intent for amount:',amount);const paymentResponse=await axios.post(\"\".concat(BASE_URL,\"/api/payments/create-payment-intent\"),{orderId:createdOrderId,amount:amount,currency:'usd'},{headers:{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'},timeout:10000});console.log('✅ Payment intent response:',paymentResponse.data);if(paymentResponse.data.clientSecret){console.log('✅ Payment intent created, client secret received');setClientSecret(paymentResponse.data.clientSecret);}else{throw new Error('No client secret received from payment service');}}catch(error){var _error$response,_error$response$data,_error$response2,_error$response2$data;console.error('❌ Payment setup error:',error);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message;setPaymentError(\"Payment setup failed: \".concat(errorMessage));setIsCheckingOut(false);}};// SIMPLE PAYMENT SUCCESS HANDLER\nconst handlePaymentSuccess=async paymentIntent=>{try{var _JSON$parse;console.log('✅ Payment successful!');// STEP 1: CLEAR CART IMMEDIATELY\nconsole.log('🛒 CLEARING CART AFTER PAYMENT...');await clearCartAfterPayment();// STEP 2: Prepare order data for success page\nconst orderDataForSuccess={id:currentOrderId,amount:getFinalTotal().toFixed(2),products:cartItems.map(item=>({title:item.title||item.name,price:item.price,quantity:item.quantity,img:item.img||item.image,size:item.size,color:item.color})),address:address,paymentMethod:'Credit Card',status:'confirmed',paymentStatus:'paid',createdAt:new Date().toISOString(),paymentIntentId:paymentIntent.id};localStorage.setItem('lastOrder',JSON.stringify(orderDataForSuccess));const userEmail=(_JSON$parse=JSON.parse(localStorage.getItem('user')))===null||_JSON$parse===void 0?void 0:_JSON$parse.email;if(userEmail){localStorage.setItem('userEmail',userEmail);}console.log('🎉 Payment completed successfully, redirecting...');// Show success message briefly before redirect\nsetPaymentSuccess('Payment successful! Cart cleared. Redirecting...');setTimeout(()=>{setShowPayment(false);setClientSecret('');navigate('/success');},1000);}catch(error){console.error('❌ Post-payment processing error:',error);// EVEN IF THERE ARE ERRORS, STILL CLEAR CART AND REDIRECT\nawait clearCartAfterPayment();setPaymentSuccess('Payment successful! Redirecting...');setTimeout(()=>{setShowPayment(false);setClientSecret('');navigate('/success');},1000);}};const handlePaymentError=errorMessage=>{console.error('❌ Payment error:',errorMessage);setPaymentError(\"Payment failed: \".concat(errorMessage));};const handleCheckout=()=>{if(cartItems.length===0){alert('Your cart is empty');return;}const token=localStorage.getItem('token');if(!token){alert('Please login to checkout');navigate('/login');return;}if(!showAddressForm){setShowAddressForm(true);return;}// Validate address before proceeding to payment\nif(!address.street||!address.city||!address.state||!address.zipCode||!address.country){alert('Please fill in all address fields');return;}setShowPayment(true);handlePayment();// Start the payment process\n};const handleInputChange=e=>{const{name,value}=e.target;setAddress(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleContinueShopping=()=>{navigate('/');};const shippingInfo=calculateShipping();if(loading){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"YOUR BAG\"}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'50px'},children:\"Loading cart...\"})]})});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"YOUR BAG\"}),/*#__PURE__*/_jsxs(Top,{children:[/*#__PURE__*/_jsx(TopButton,{onClick:handleContinueShopping,children:\"CONTINUE SHOPPING\"}),/*#__PURE__*/_jsxs(TopTexts,{children:[/*#__PURE__*/_jsxs(TopText,{children:[\"Shopping Bag(\",cartItems.length,\")\"]}),/*#__PURE__*/_jsx(TopText,{children:\"Your Wishlist (0)\"})]}),/*#__PURE__*/_jsx(TopButton,{type:\"filled\",onClick:handleCheckout,disabled:cartItems.length===0,children:isCheckingOut?'PROCESSING...':'CHECKOUT NOW'})]}),/*#__PURE__*/_jsxs(Bottom,{children:[/*#__PURE__*/_jsx(Info,{children:cartItems.length===0?/*#__PURE__*/_jsxs(EmptyCart,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Add some products to your cart to see them here\"}),/*#__PURE__*/_jsx(TopButton,{onClick:handleContinueShopping,style:{marginTop:'20px'},children:\"START SHOPPING\"})]}):cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Product,{children:[/*#__PURE__*/_jsxs(ProductDetail,{children:[/*#__PURE__*/_jsx(Image,{src:item.img||'https://via.placeholder.com/200x200?text=No+Image'}),/*#__PURE__*/_jsxs(Details,{children:[/*#__PURE__*/_jsxs(ProductName,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Product:\"}),\" \",item.title]}),/*#__PURE__*/_jsxs(ProductId,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"ID:\"}),\" \",item.productId]}),item.size&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Size:\"}),\" \",item.size]}),item.color&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Color:\"}),\" \",item.color]})]})]}),/*#__PURE__*/_jsxs(PriceDetail,{children:[/*#__PURE__*/_jsxs(ProductAmountContainer,{children:[/*#__PURE__*/_jsx(QuantityButton,{onClick:()=>handleQuantity(item.productId,item.quantity-1),children:\"-\"}),/*#__PURE__*/_jsx(ProductAmount,{children:item.quantity}),/*#__PURE__*/_jsx(QuantityButton,{onClick:()=>handleQuantity(item.productId,item.quantity+1),children:\"+\"})]}),/*#__PURE__*/_jsxs(ProductPrice,{children:[\"$ \",(parseFloat(item.price)*item.quantity).toFixed(2)]})]})]}),/*#__PURE__*/_jsx(Hr,{})]},item.id))}),cartItems.length>0&&/*#__PURE__*/_jsxs(Summary,{children:[/*#__PURE__*/_jsx(SummaryTitle,{children:\"ORDER SUMMARY\"}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Subtotal\"}),/*#__PURE__*/_jsxs(SummaryItemPrice,{children:[\"$ \",getTotal().toFixed(2)]})]}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsxs(SummaryItemText,{children:[\"Shipping\",shippingInfo.hasFreeShipping&&/*#__PURE__*/_jsx(\"span\",{style:{color:'green',marginLeft:'5px',fontSize:'12px',fontWeight:'600'},children:\"\\uD83D\\uDE9A FREE\"})]}),/*#__PURE__*/_jsx(SummaryItemPrice,{children:shippingInfo.hasFreeShipping?'$ 0.00':\"$ \".concat(shippingInfo.shipping.toFixed(2))})]}),!shippingInfo.hasFreeShipping&&/*#__PURE__*/_jsx(SummaryItem,{children:/*#__PURE__*/_jsxs(SummaryItemText,{style:{fontSize:'12px',color:'green'},children:[\"Add $\",(50-getTotal()).toFixed(2),\" more for FREE shipping!\"]})}),/*#__PURE__*/_jsxs(SummaryItem,{type:\"total\",children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Total\"}),/*#__PURE__*/_jsxs(SummaryItemPrice,{children:[\"$ \",getFinalTotal().toFixed(2)]})]}),showAddressForm&&/*#__PURE__*/_jsxs(AddressForm,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shipping Address\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"street\",placeholder:\"Street Address\",value:address.street,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsxs(InputRow,{children:[/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"city\",placeholder:\"City\",value:address.city,onChange:handleInputChange,required:true})}),/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"state\",placeholder:\"State\",value:address.state,onChange:handleInputChange,required:true})})]}),/*#__PURE__*/_jsxs(InputRow,{children:[/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"zipCode\",placeholder:\"ZIP Code\",value:address.zipCode,onChange:handleInputChange,required:true})}),/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"country\",placeholder:\"Country\",value:address.country,onChange:handleInputChange,required:true})})]})]}),/*#__PURE__*/_jsx(Button,{onClick:handleCheckout,disabled:cartItems.length===0||isCheckingOut,children:isCheckingOut?'PROCESSING...':'CHECKOUT NOW'})]})]})]}),showPayment&&/*#__PURE__*/_jsx(PaymentModal,{children:/*#__PURE__*/_jsxs(PaymentContent,{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'20px',color:'#333'},children:\"Complete Your Payment\"}),paymentError&&/*#__PURE__*/_jsxs(ErrorMessage,{children:[\"\\u274C \",paymentError]}),paymentSuccess&&/*#__PURE__*/_jsxs(SuccessMessage,{children:[\"\\u2705 \",paymentSuccess]}),!paymentSuccess&&clientSecret&&/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,options:{clientSecret},children:/*#__PURE__*/_jsx(StripePaymentForm,{amount:getFinalTotal().toFixed(2),clientSecret:clientSecret,onSuccess:handlePaymentSuccess,onError:handlePaymentError})}),!clientSecret&&!paymentError&&!paymentSuccess&&/*#__PURE__*/_jsx(LoadingSpinner,{children:/*#__PURE__*/_jsx(\"div\",{children:\"\\u23F3 Setting up payment...\"})}),/*#__PURE__*/_jsx(CancelBtn,{onClick:()=>{setShowPayment(false);setClientSecret('');setPaymentError('');setPaymentSuccess('');setIsCheckingOut(false);},children:\"Cancel Payment\"})]})})]});};export default CartPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","styled","axios","useNavigate","loadStripe","Elements","CardNumberElement","CardExpiryElement","CardCvcElement","useStripe","useElements","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","stripePromise","Container","div","_templateObject","_taggedTemplateLiteral","Wrapper","_templateObject2","Title","h1","_templateObject3","Top","_templateObject4","TopButton","button","_templateObject5","props","type","TopTexts","_templateObject6","TopText","span","_templateObject7","Bottom","_templateObject8","Info","_templateObject9","Product","_templateObject0","ProductDetail","_templateObject1","Image","img","_templateObject10","Details","_templateObject11","ProductName","_templateObject12","ProductId","_templateObject13","PriceDetail","_templateObject14","ProductAmountContainer","_templateObject15","ProductAmount","_templateObject16","ProductPrice","_templateObject17","Hr","hr","_templateObject18","Summary","_templateObject19","SummaryTitle","_templateObject20","SummaryItem","_templateObject21","SummaryItemText","_templateObject22","SummaryItemPrice","_templateObject23","Button","_templateObject24","QuantityButton","_templateObject25","EmptyCart","_templateObject26","AddressForm","_templateObject27","Input","input","_templateObject28","InputRow","_templateObject29","InputGroup","_templateObject30","PaymentModal","_templateObject31","PaymentContent","_templateObject32","PayNowBtn","_templateObject33","CancelBtn","_templateObject34","ErrorMessage","_templateObject35","SuccessMessage","_templateObject36","CardFormContainer","_templateObject37","CardFieldContainer","_templateObject38","CardFieldLabel","label","_templateObject39","CardFieldWrapper","_templateObject40","CardRow","_templateObject41","LoadingSpinner","_templateObject42","StripePaymentForm","_ref","amount","clientSecret","onSuccess","onError","stripe","elements","processing","setProcessing","error","setError","handleSubmit","event","preventDefault","cardNumber","getElement","stripeError","paymentMethod","createPaymentMethod","card","message","console","log","confirmError","paymentIntent","confirmCardPayment","payment_method","id","status","concat","err","cardElementOptions","style","base","fontSize","color","fontFamily","backgroundColor","invalid","iconColor","children","marginBottom","fontWeight","onSubmit","options","_objectSpread","placeholder","textAlign","disabled","marginRight","marginTop","padding","background","borderRadius","border","margin","lineHeight","CartPage","cartItems","setCartItems","loading","setLoading","isCheckingOut","setIsCheckingOut","showAddressForm","setShowAddressForm","showPayment","setShowPayment","paymentError","setPaymentError","paymentSuccess","setPaymentSuccess","setClientSecret","currentOrderId","setCurrentOrderId","navigate","address","setAddress","street","city","state","zipCode","country","getAuthHeader","token","localStorage","getItem","Authorization","getCurrentUser","base64Payload","split","payload","JSON","parse","atob","userId","calculateShipping","subtotal","getTotal","shipping","hasFreeShipping","reduce","total","item","parseFloat","price","quantity","getFinalTotal","shippingInfo","clearCartAfterPayment","response","delete","process","env","REACT_APP_API_URL","headers","timeout","data","fetchCart","get","length","updateCartItem","productId","put","removeFromCart","handleQuantity","handlePayment","BASE_URL","Error","orderData","map","title","name","size","image","totalAmount","orderResponse","post","order","createdOrderId","Math","round","paymentResponse","orderId","currency","_error$response","_error$response$data","_error$response2","_error$response2$data","errorMessage","handlePaymentSuccess","_JSON$parse","orderDataForSuccess","toFixed","products","paymentStatus","createdAt","Date","toISOString","paymentIntentId","setItem","stringify","userEmail","email","setTimeout","handlePaymentError","handleCheckout","alert","handleInputChange","e","value","target","prev","handleContinueShopping","onClick","src","marginLeft","onChange","required"],"sources":["D:/raju new 1/front-end/src/pages/CartPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { \r\n  Elements, \r\n  CardNumberElement, \r\n  CardExpiryElement, \r\n  CardCvcElement, \r\n  useStripe, \r\n  useElements \r\n} from \"@stripe/react-stripe-js\";\r\n\r\nconst stripePromise = loadStripe(\"pk_test_51SEWfbGUJ7v3D9GXVs5sPIBEY08wZrpGmeuko8YClRovgbeQkkYJ2NpxLMtM3RyA8v7NSKM4cE8mTLthWafiYGv500lPgVJb3n\");\r\n\r\n// ========== MOBILE RESPONSIVE STYLED COMPONENTS ==========\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  \r\n  @media (max-width: 768px) {\r\n    padding: 10px;\r\n  }\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-weight: 300;\r\n  text-align: center;\r\n  font-size: 1.8rem;\r\n  margin-bottom: 20px;\r\n  \r\n  @media (max-width: 768px) {\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    font-size: 1.3rem;\r\n    margin-bottom: 15px;\r\n  }\r\n`;\r\n\r\nconst Top = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20px;\r\n  flex-wrap: wrap;\r\n  gap: 15px;\r\n  \r\n  @media (max-width: 768px) {\r\n    padding: 15px 10px;\r\n    justify-content: center;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    flex-direction: column;\r\n    gap: 10px;\r\n    padding: 10px 5px;\r\n  }\r\n`;\r\n\r\nconst TopButton = styled.button`\r\n  padding: 12px 20px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  border: ${(props) => props.type === \"filled\" ? \"none\" : \"2px solid black\"};\r\n  background-color: ${(props) =>\r\n    props.type === \"filled\" ? \"black\" : \"transparent\"};\r\n  color: ${(props) => props.type === \"filled\" ? \"white\" : \"black\"};\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  min-height: 44px;\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n  }\r\n  \r\n  &:disabled {\r\n    background-color: #ccc;\r\n    cursor: not-allowed;\r\n    transform: none;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 10px 16px;\r\n    font-size: 13px;\r\n    min-height: 40px;\r\n    width: 100%;\r\n    max-width: 200px;\r\n  }\r\n`;\r\n\r\nconst TopTexts = styled.div`\r\n  display: flex;\r\n  gap: 15px;\r\n  \r\n  @media (max-width: 480px) {\r\n    gap: 10px;\r\n    justify-content: center;\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nconst TopText = styled.span`\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  \r\n  @media (max-width: 480px) {\r\n    font-size: 13px;\r\n  }\r\n`;\r\n\r\nconst Bottom = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 30px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    gap: 20px;\r\n  }\r\n`;\r\n\r\nconst Info = styled.div`\r\n  flex: 3;\r\n`;\r\n\r\nconst Product = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n  gap: 20px;\r\n  padding: 15px;\r\n  border: 1px solid #f0f0f0;\r\n  border-radius: 10px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    gap: 15px;\r\n    padding: 12px;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 10px;\r\n    gap: 12px;\r\n  }\r\n`;\r\n\r\nconst ProductDetail = styled.div`\r\n  flex: 2;\r\n  display: flex;\r\n  gap: 15px;\r\n  \r\n  @media (max-width: 480px) {\r\n    flex-direction: column;\r\n    text-align: center;\r\n    gap: 10px;\r\n  }\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 200px;\r\n  height: 200px;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  \r\n  @media (max-width: 768px) {\r\n    width: 150px;\r\n    height: 150px;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    width: 100%;\r\n    max-width: 250px;\r\n    height: 180px;\r\n    margin: 0 auto;\r\n  }\r\n`;\r\n\r\nconst Details = styled.div`\r\n  padding: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  flex: 1;\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 8px 0;\r\n    gap: 8px;\r\n  }\r\n`;\r\n\r\nconst ProductName = styled.span`\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  line-height: 1.4;\r\n  \r\n  @media (max-width: 480px) {\r\n    font-size: 15px;\r\n  }\r\n`;\r\n\r\nconst ProductId = styled.span`\r\n  color: gray;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst PriceDetail = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 15px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    gap: 12px;\r\n  }\r\n`;\r\n\r\nconst ProductAmountContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ProductAmount = styled.div`\r\n  font-size: 20px;\r\n  margin: 0 10px;\r\n  min-width: 30px;\r\n  text-align: center;\r\n  \r\n  @media (max-width: 480px) {\r\n    font-size: 18px;\r\n  }\r\n`;\r\n\r\nconst ProductPrice = styled.div`\r\n  font-size: 24px;\r\n  font-weight: 200;\r\n  \r\n  @media (max-width: 480px) {\r\n    font-size: 20px;\r\n  }\r\n`;\r\n\r\nconst Hr = styled.hr`\r\n  background-color: #eee;\r\n  border: none;\r\n  height: 1px;\r\n  margin: 20px 0;\r\n`;\r\n\r\nconst Summary = styled.div`\r\n  flex: 1;\r\n  border: 0.5px solid lightgray;\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  height: fit-content;\r\n  position: sticky;\r\n  top: 20px;\r\n  \r\n  @media (max-width: 768px) {\r\n    position: static;\r\n    margin-top: 20px;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 15px;\r\n    margin-top: 15px;\r\n  }\r\n`;\r\n\r\nconst SummaryTitle = styled.h1`\r\n  font-weight: 200;\r\n  font-size: 1.5rem;\r\n  margin-bottom: 20px;\r\n  \r\n  @media (max-width: 480px) {\r\n    font-size: 1.25rem;\r\n    margin-bottom: 15px;\r\n  }\r\n`;\r\n\r\nconst SummaryItem = styled.div`\r\n  margin: 20px 0px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-weight: ${(props) => props.type === \"total\" && \"500\"};\r\n  font-size: ${(props) => props.type === \"total\" ? \"20px\" : \"16px\"};\r\n  \r\n  @media (max-width: 480px) {\r\n    margin: 15px 0px;\r\n    font-size: ${(props) => props.type === \"total\" ? \"18px\" : \"14px\"};\r\n  }\r\n`;\r\n\r\nconst SummaryItemText = styled.span``;\r\n\r\nconst SummaryItemPrice = styled.span``;\r\n\r\nconst Button = styled.button`\r\n  width: 100%;\r\n  padding: 15px;\r\n  background-color: black;\r\n  color: white;\r\n  font-weight: 600;\r\n  border: none;\r\n  cursor: pointer;\r\n  margin-top: 10px;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  min-height: 50px;\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    background-color: #333;\r\n  }\r\n  \r\n  &:disabled {\r\n    background-color: #ccc;\r\n    cursor: not-allowed;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 12px;\r\n    font-size: 14px;\r\n    min-height: 44px;\r\n  }\r\n`;\r\n\r\nconst QuantityButton = styled.button`\r\n  width: 35px;\r\n  height: 35px;\r\n  border: 1px solid teal;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n  min-height: 35px;\r\n  transition: all 0.2s ease;\r\n  \r\n  &:hover {\r\n    background-color: #f0f0f0;\r\n  }\r\n  \r\n  @media (max-width: 480px) {\r\n    width: 30px;\r\n    height: 30px;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst EmptyCart = styled.div`\r\n  text-align: center;\r\n  padding: 50px;\r\n  font-size: 18px;\r\n  color: gray;\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 30px 20px;\r\n    font-size: 16px;\r\n  }\r\n`;\r\n\r\nconst AddressForm = styled.div`\r\n  margin: 20px 0;\r\n  padding: 20px;\r\n  border: 1px solid #eee;\r\n  border-radius: 10px;\r\n  background-color: #f9f9f9;\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 15px;\r\n    margin: 15px 0;\r\n  }\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 12px;\r\n  margin: 8px 0;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 10px;\r\n    font-size: 16px; /* Prevents zoom on iOS */\r\n  }\r\n`;\r\n\r\nconst InputRow = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst InputGroup = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst PaymentModal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n  padding: 20px;\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 10px;\r\n    align-items: flex-start;\r\n    padding-top: 50px;\r\n  }\r\n`;\r\n\r\nconst PaymentContent = styled.div`\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 12px;\r\n  width: 90%;\r\n  max-width: 500px;\r\n  text-align: center;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  \r\n  @media (max-width: 480px) {\r\n    padding: 1.5rem;\r\n    max-height: 80vh;\r\n  }\r\n`;\r\n\r\nconst PayNowBtn = styled.button`\r\n  background: #4CAF50;\r\n  color: white;\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  width: 100%;\r\n  transition: background 0.3s;\r\n\r\n  &:hover {\r\n    background: #45a049;\r\n  }\r\n\r\n  &:disabled {\r\n    background: #cccccc;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst CancelBtn = styled.button`\r\n  background: #f44336;\r\n  color: white;\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  width: 100%;\r\n  transition: background 0.3s;\r\n\r\n  &:hover {\r\n    background: #da190b;\r\n  }\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  color: #d32f2f;\r\n  background-color: #ffebee;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  margin: 15px 0;\r\n  font-size: 14px;\r\n  border: 1px solid #f5c6cb;\r\n`;\r\n\r\nconst SuccessMessage = styled.div`\r\n  color: #155724;\r\n  background-color: #d4edda;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  margin: 15px 0;\r\n  font-size: 14px;\r\n  border: 1px solid #c3e6cb;\r\n`;\r\n\r\nconst CardFormContainer = styled.div`\r\n  margin: 20px 0;\r\n  text-align: left;\r\n`;\r\n\r\nconst CardFieldContainer = styled.div`\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst CardFieldLabel = styled.label`\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  font-size: 14px;\r\n`;\r\n\r\nconst CardFieldWrapper = styled.div`\r\n  padding: 12px;\r\n  border: 2px solid #e1e5e9;\r\n  border-radius: 8px;\r\n  background: white;\r\n  transition: border-color 0.3s;\r\n  \r\n  &:focus-within {\r\n    border-color: #4CAF50;\r\n    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.1);\r\n  }\r\n`;\r\n\r\nconst CardRow = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 15px;\r\n  \r\n  @media (max-width: 480px) {\r\n    grid-template-columns: 1fr;\r\n  }\r\n`;\r\n\r\nconst LoadingSpinner = styled.div`\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: #666;\r\n`;\r\n\r\n// ========== STRIPE PAYMENT FORM COMPONENT ==========\r\nconst StripePaymentForm = ({ amount, clientSecret, onSuccess, onError }) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [processing, setProcessing] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    \r\n    if (!stripe || !elements) {\r\n      return;\r\n    }\r\n\r\n    setProcessing(true);\r\n    setError('');\r\n\r\n    try {\r\n      const cardNumber = elements.getElement(CardNumberElement);\r\n\r\n      const { error: stripeError, paymentMethod } = await stripe.createPaymentMethod({\r\n        type: 'card',\r\n        card: cardNumber,\r\n      });\r\n\r\n      if (stripeError) {\r\n        setError(stripeError.message);\r\n        onError(stripeError.message);\r\n        return;\r\n      }\r\n\r\n      console.log('🔄 Confirming card payment...');\r\n      \r\n      const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {\r\n        payment_method: paymentMethod.id,\r\n      });\r\n\r\n      if (confirmError) {\r\n        setError(confirmError.message);\r\n        onError(confirmError.message);\r\n      } else if (paymentIntent.status === 'succeeded') {\r\n        console.log('✅ Payment successful!');\r\n        onSuccess(paymentIntent);\r\n      } else {\r\n        setError(`Payment status: ${paymentIntent.status}`);\r\n        onError(`Payment status: ${paymentIntent.status}`);\r\n      }\r\n    } catch (err) {\r\n      console.error('❌ Payment error:', err);\r\n      setError('Payment failed. Please try again.');\r\n      onError(err.message);\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  const cardElementOptions = {\r\n    style: {\r\n      base: {\r\n        fontSize: '16px',\r\n        color: '#424770',\r\n        fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\r\n        '::placeholder': {\r\n          color: '#aab7c4',\r\n        },\r\n        backgroundColor: 'transparent',\r\n      },\r\n      invalid: {\r\n        color: '#9e2146',\r\n        iconColor: '#9e2146',\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <CardFormContainer>\r\n      <h3 style={{ marginBottom: '15px', color: '#333' }}>Payment Details</h3>\r\n      <p style={{ fontSize: '18px', fontWeight: '600', color: '#2c5aa0', marginBottom: '20px' }}>\r\n        Total Amount: <span style={{ color: '#4CAF50' }}>${amount}</span>\r\n      </p>\r\n      \r\n      <form onSubmit={handleSubmit}>\r\n        <CardFieldContainer>\r\n          <CardFieldLabel>Card Number</CardFieldLabel>\r\n          <CardFieldWrapper>\r\n            <CardNumberElement\r\n              options={{\r\n                ...cardElementOptions,\r\n                placeholder: '1234 1234 1234 1234',\r\n              }}\r\n            />\r\n          </CardFieldWrapper>\r\n        </CardFieldContainer>\r\n\r\n        <CardRow>\r\n          <CardFieldContainer>\r\n            <CardFieldLabel>Expiry Date</CardFieldLabel>\r\n            <CardFieldWrapper>\r\n              <CardExpiryElement\r\n                options={{\r\n                  ...cardElementOptions,\r\n                  placeholder: 'MM/YY',\r\n                }}\r\n              />\r\n            </CardFieldWrapper>\r\n          </CardFieldContainer>\r\n\r\n          <CardFieldContainer>\r\n            <CardFieldLabel>CVC</CardFieldLabel>\r\n            <CardFieldWrapper>\r\n              <CardCvcElement\r\n                options={{\r\n                  ...cardElementOptions,\r\n                  placeholder: '123',\r\n                }}\r\n              />\r\n            </CardFieldWrapper>\r\n          </CardFieldContainer>\r\n        </CardRow>\r\n        \r\n        {error && (\r\n          <ErrorMessage style={{ textAlign: 'left' }}>\r\n            ⚠️ {error}\r\n          </ErrorMessage>\r\n        )}\r\n        \r\n        <PayNowBtn type=\"submit\" disabled={!stripe || processing}>\r\n          {processing ? (\r\n            <>\r\n              <span style={{ marginRight: '8px' }}>⏳</span>\r\n              Processing Payment...\r\n            </>\r\n          ) : (\r\n            `Pay $${amount}`\r\n          )}\r\n        </PayNowBtn>\r\n      </form>\r\n\r\n      <div style={{ \r\n        marginTop: '20px', \r\n        padding: '15px', \r\n        background: '#f8f9fa', \r\n        borderRadius: '8px', \r\n        fontSize: '13px',\r\n        textAlign: 'left',\r\n        border: '1px solid #e9ecef'\r\n      }}>\r\n        <h4 style={{ margin: '0 0 10px 0', color: '#495057', fontSize: '14px' }}>\r\n          🧪 Test Card Information\r\n        </h4>\r\n        <div style={{ lineHeight: '1.6', color: '#6c757d' }}>\r\n          <div><strong>Card Number:</strong> 4242 4242 4242 4242</div>\r\n          <div><strong>Expiry Date:</strong> 12/34</div>\r\n          <div><strong>CVC:</strong> 123</div>\r\n          <div><strong>ZIP Code:</strong> 12345</div>\r\n        </div>\r\n      </div>\r\n    </CardFormContainer>\r\n  );\r\n};\r\n\r\n// ========== MAIN CART PAGE COMPONENT ==========\r\nconst CartPage = () => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isCheckingOut, setIsCheckingOut] = useState(false);\r\n  const [showAddressForm, setShowAddressForm] = useState(false);\r\n  const [showPayment, setShowPayment] = useState(false);\r\n  const [paymentError, setPaymentError] = useState('');\r\n  const [paymentSuccess, setPaymentSuccess] = useState('');\r\n  const [clientSecret, setClientSecret] = useState('');\r\n  const [currentOrderId, setCurrentOrderId] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const [address, setAddress] = useState({\r\n    street: \"\",\r\n    city: \"\",\r\n    state: \"\",\r\n    zipCode: \"\",\r\n    country: \"United States\"\r\n  });\r\n\r\n  // Helper Functions\r\n  const getAuthHeader = () => {\r\n    const token = localStorage.getItem('token');\r\n    return token ? { Authorization: `Bearer ${token}` } : {};\r\n  };\r\n\r\n  const getCurrentUser = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      try {\r\n        const base64Payload = token.split('.')[1];\r\n        const payload = JSON.parse(atob(base64Payload));\r\n        return payload.userId;\r\n      } catch (error) {\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const calculateShipping = () => {\r\n    const subtotal = getTotal();\r\n    if (subtotal >= 50) {\r\n      return { shipping: 0, hasFreeShipping: true };\r\n    } else {\r\n      return { shipping: 5.90, hasFreeShipping: false };\r\n    }\r\n  };\r\n\r\n  const getTotal = () => {\r\n    return cartItems.reduce((total, item) => total + parseFloat(item.price) * item.quantity, 0);\r\n  };\r\n\r\n  const getFinalTotal = () => {\r\n    const shippingInfo = calculateShipping();\r\n    return getTotal() + shippingInfo.shipping;\r\n  };\r\n\r\n  // SIMPLE CART CLEARING - NO COMPLEX LOGIC\r\n  const clearCartAfterPayment = async () => {\r\n    const userId = getCurrentUser();\r\n    if (!userId) {\r\n      console.log('❌ No user ID for cart clearing');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      console.log('🛒 FORCE CLEARING CART...');\r\n      \r\n      // Clear backend cart\r\n      const response = await axios.delete(\r\n        `${process.env.REACT_APP_API_URL}/api/cart/${userId}/clear`,\r\n        { \r\n          headers: getAuthHeader(),\r\n          timeout: 10000\r\n        }\r\n      );\r\n\r\n      console.log('✅ Backend cart clear response:', response.data);\r\n      \r\n      // ALWAYS CLEAR LOCAL STATE\r\n      setCartItems([]);\r\n      console.log('✅ Cart cleared successfully');\r\n      return true;\r\n\r\n    } catch (error) {\r\n      console.error('❌ Backend cart clear failed:', error);\r\n      // STILL CLEAR LOCALLY EVEN IF BACKEND FAILS\r\n      setCartItems([]);\r\n      return true;\r\n    }\r\n  };\r\n\r\n  const fetchCart = useCallback(async () => {\r\n    const userId = getCurrentUser();\r\n    if (!userId) {\r\n      setCartItems([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      console.log('🔄 Fetching cart...');\r\n      const response = await axios.get(\r\n        `${process.env.REACT_APP_API_URL}/api/cart/${userId}`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      console.log('✅ Cart data received:', response.data.length, 'items');\r\n      setCartItems(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching cart:', error);\r\n      setCartItems([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const updateCartItem = async (productId, quantity) => {\r\n    const userId = getCurrentUser();\r\n    if (!userId) return;\r\n\r\n    try {\r\n      await axios.put(\r\n        `${process.env.REACT_APP_API_URL}/api/cart/${userId}`,\r\n        { productId, quantity },\r\n        { headers: getAuthHeader() }\r\n      );\r\n      await fetchCart();\r\n    } catch (error) {\r\n      console.error('Error updating cart:', error);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (productId) => {\r\n    const userId = getCurrentUser();\r\n    if (!userId) return;\r\n\r\n    try {\r\n      await axios.delete(\r\n        `${process.env.REACT_APP_API_URL}/api/cart/${userId}/${productId}`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      await fetchCart();\r\n    } catch (error) {\r\n      console.error('Error removing from cart:', error);\r\n    }\r\n  };\r\n\r\n  // Fetch cart on component mount\r\n  useEffect(() => {\r\n    console.log('🔍 CartPage mounted - fetching cart');\r\n    fetchCart();\r\n  }, [fetchCart]);\r\n\r\n  const handleQuantity = (productId, quantity) => {\r\n    if (quantity === 0) {\r\n      removeFromCart(productId);\r\n    } else {\r\n      updateCartItem(productId, quantity);\r\n    }\r\n  };\r\n\r\n  const handlePayment = async () => {\r\n    setPaymentError('');\r\n    setPaymentSuccess('');\r\n    setIsCheckingOut(true);\r\n\r\n    try {\r\n      const userId = getCurrentUser();\r\n      const token = localStorage.getItem('token');\r\n      const BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\n      // Validate address first\r\n      if (!address.street || !address.city || !address.state || !address.zipCode || !address.country) {\r\n        throw new Error('Please fill in all address fields');\r\n      }\r\n\r\n      // Validate cart items\r\n      if (cartItems.length === 0) {\r\n        throw new Error('Cart is empty');\r\n      }\r\n\r\n      console.log('🔄 Starting payment process...');\r\n      console.log('📦 Cart items:', cartItems);\r\n      console.log('🏠 Address:', address);\r\n      console.log('💰 Total amount:', getFinalTotal());\r\n\r\n      // Step 1: Create order\r\n      const orderData = {\r\n        cartItems: cartItems.map(item => ({\r\n          productId: item.productId || item.id,\r\n          title: item.title || item.name,\r\n          price: parseFloat(item.price),\r\n          quantity: item.quantity,\r\n          size: item.size || 'One Size',\r\n          color: item.color || 'Default',\r\n          img: item.img || item.image\r\n        })),\r\n        address: address,\r\n        totalAmount: getFinalTotal()\r\n      };\r\n\r\n      console.log('📦 Creating order with data:', orderData);\r\n\r\n      const orderResponse = await axios.post(\r\n        `${BASE_URL}/api/orders`,\r\n        orderData,\r\n        { \r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          timeout: 10000\r\n        }\r\n      );\r\n\r\n      console.log('✅ Order creation response:', orderResponse.data);\r\n\r\n      if (!orderResponse.data.order || !orderResponse.data.order.id) {\r\n        throw new Error('Order creation failed - no order ID returned');\r\n      }\r\n\r\n      const createdOrderId = orderResponse.data.order.id;\r\n      setCurrentOrderId(createdOrderId);\r\n\r\n      console.log('✅ Order created successfully:', createdOrderId);\r\n\r\n      // Step 2: Create payment intent with the order ID\r\n      const amount = Math.round(getFinalTotal() * 100);\r\n\r\n      console.log('💳 Creating payment intent for amount:', amount);\r\n\r\n      const paymentResponse = await axios.post(\r\n        `${BASE_URL}/api/payments/create-payment-intent`,\r\n        { \r\n          orderId: createdOrderId,\r\n          amount: amount,\r\n          currency: 'usd'\r\n        },\r\n        { \r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          timeout: 10000\r\n        }\r\n      );\r\n\r\n      console.log('✅ Payment intent response:', paymentResponse.data);\r\n\r\n      if (paymentResponse.data.clientSecret) {\r\n        console.log('✅ Payment intent created, client secret received');\r\n        setClientSecret(paymentResponse.data.clientSecret);\r\n      } else {\r\n        throw new Error('No client secret received from payment service');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('❌ Payment setup error:', error);\r\n      const errorMessage = error.response?.data?.error || error.response?.data?.message || error.message;\r\n      setPaymentError(`Payment setup failed: ${errorMessage}`);\r\n      setIsCheckingOut(false);\r\n    }\r\n  };\r\n\r\n  // SIMPLE PAYMENT SUCCESS HANDLER\r\n  const handlePaymentSuccess = async (paymentIntent) => {\r\n    try {\r\n      console.log('✅ Payment successful!');\r\n      \r\n      // STEP 1: CLEAR CART IMMEDIATELY\r\n      console.log('🛒 CLEARING CART AFTER PAYMENT...');\r\n      await clearCartAfterPayment();\r\n      \r\n      // STEP 2: Prepare order data for success page\r\n      const orderDataForSuccess = {\r\n        id: currentOrderId,\r\n        amount: getFinalTotal().toFixed(2),\r\n        products: cartItems.map(item => ({\r\n          title: item.title || item.name,\r\n          price: item.price,\r\n          quantity: item.quantity,\r\n          img: item.img || item.image,\r\n          size: item.size,\r\n          color: item.color\r\n        })),\r\n        address: address,\r\n        paymentMethod: 'Credit Card',\r\n        status: 'confirmed',\r\n        paymentStatus: 'paid',\r\n        createdAt: new Date().toISOString(),\r\n        paymentIntentId: paymentIntent.id\r\n      };\r\n\r\n      localStorage.setItem('lastOrder', JSON.stringify(orderDataForSuccess));\r\n      \r\n      const userEmail = JSON.parse(localStorage.getItem('user'))?.email;\r\n      if (userEmail) {\r\n        localStorage.setItem('userEmail', userEmail);\r\n      }\r\n\r\n      console.log('🎉 Payment completed successfully, redirecting...');\r\n\r\n      // Show success message briefly before redirect\r\n      setPaymentSuccess('Payment successful! Cart cleared. Redirecting...');\r\n      \r\n      setTimeout(() => {\r\n        setShowPayment(false);\r\n        setClientSecret('');\r\n        navigate('/success');\r\n      }, 1000);\r\n\r\n    } catch (error) {\r\n      console.error('❌ Post-payment processing error:', error);\r\n      \r\n      // EVEN IF THERE ARE ERRORS, STILL CLEAR CART AND REDIRECT\r\n      await clearCartAfterPayment();\r\n      \r\n      setPaymentSuccess('Payment successful! Redirecting...');\r\n      \r\n      setTimeout(() => {\r\n        setShowPayment(false);\r\n        setClientSecret('');\r\n        navigate('/success');\r\n      }, 1000);\r\n    }\r\n  };\r\n\r\n  const handlePaymentError = (errorMessage) => {\r\n    console.error('❌ Payment error:', errorMessage);\r\n    setPaymentError(`Payment failed: ${errorMessage}`);\r\n  };\r\n\r\n  const handleCheckout = () => {\r\n    if (cartItems.length === 0) {\r\n      alert('Your cart is empty');\r\n      return;\r\n    }\r\n    \r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('Please login to checkout');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    if (!showAddressForm) {\r\n      setShowAddressForm(true);\r\n      return;\r\n    }\r\n\r\n    // Validate address before proceeding to payment\r\n    if (!address.street || !address.city || !address.state || !address.zipCode || !address.country) {\r\n      alert('Please fill in all address fields');\r\n      return;\r\n    }\r\n\r\n    setShowPayment(true);\r\n    handlePayment(); // Start the payment process\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setAddress(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleContinueShopping = () => {\r\n    navigate('/');\r\n  };\r\n\r\n  const shippingInfo = calculateShipping();\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <Wrapper>\r\n          <Title>YOUR BAG</Title>\r\n          <div style={{ textAlign: 'center', padding: '50px' }}>Loading cart...</div>\r\n        </Wrapper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Wrapper>\r\n        <Title>YOUR BAG</Title>\r\n        <Top>\r\n          <TopButton onClick={handleContinueShopping}>CONTINUE SHOPPING</TopButton>\r\n          <TopTexts>\r\n            <TopText>Shopping Bag({cartItems.length})</TopText>\r\n            <TopText>Your Wishlist (0)</TopText>\r\n          </TopTexts>\r\n          <TopButton \r\n            type=\"filled\" \r\n            onClick={handleCheckout}\r\n            disabled={cartItems.length === 0}\r\n          >\r\n            {isCheckingOut ? 'PROCESSING...' : 'CHECKOUT NOW'}\r\n          </TopButton>\r\n        </Top>\r\n        <Bottom>\r\n          <Info>\r\n            {cartItems.length === 0 ? (\r\n              <EmptyCart>\r\n                <h3>Your cart is empty</h3>\r\n                <p>Add some products to your cart to see them here</p>\r\n                <TopButton onClick={handleContinueShopping} style={{ marginTop: '20px' }}>\r\n                  START SHOPPING\r\n                </TopButton>\r\n              </EmptyCart>\r\n            ) : (\r\n              cartItems.map((item) => (\r\n                <div key={item.id}>\r\n                  <Product>\r\n                    <ProductDetail>\r\n                      <Image src={item.img || 'https://via.placeholder.com/200x200?text=No+Image'} />\r\n                      <Details>\r\n                        <ProductName>\r\n                          <b>Product:</b> {item.title}\r\n                        </ProductName>\r\n                        <ProductId>\r\n                          <b>ID:</b> {item.productId}\r\n                        </ProductId>\r\n                        {item.size && (\r\n                          <div>\r\n                            <b>Size:</b> {item.size}\r\n                          </div>\r\n                        )}\r\n                        {item.color && (\r\n                          <div>\r\n                            <b>Color:</b> {item.color}\r\n                          </div>\r\n                        )}\r\n                      </Details>\r\n                    </ProductDetail>\r\n                    <PriceDetail>\r\n                      <ProductAmountContainer>\r\n                        <QuantityButton onClick={() => handleQuantity(item.productId, item.quantity - 1)}>\r\n                          -\r\n                        </QuantityButton>\r\n                        <ProductAmount>{item.quantity}</ProductAmount>\r\n                        <QuantityButton onClick={() => handleQuantity(item.productId, item.quantity + 1)}>\r\n                          +\r\n                        </QuantityButton>\r\n                      </ProductAmountContainer>\r\n                      <ProductPrice>$ {(parseFloat(item.price) * item.quantity).toFixed(2)}</ProductPrice>\r\n                    </PriceDetail>\r\n                  </Product>\r\n                  <Hr />\r\n                </div>\r\n              ))\r\n            )}\r\n          </Info>\r\n          {cartItems.length > 0 && (\r\n            <Summary>\r\n              <SummaryTitle>ORDER SUMMARY</SummaryTitle>\r\n              <SummaryItem>\r\n                <SummaryItemText>Subtotal</SummaryItemText>\r\n                <SummaryItemPrice>$ {getTotal().toFixed(2)}</SummaryItemPrice>\r\n              </SummaryItem>\r\n              \r\n              <SummaryItem>\r\n                <SummaryItemText>\r\n                  Shipping\r\n                  {shippingInfo.hasFreeShipping && (\r\n                    <span style={{ color: 'green', marginLeft: '5px', fontSize: '12px', fontWeight: '600' }}>🚚 FREE</span>\r\n                  )}\r\n                </SummaryItemText>\r\n                <SummaryItemPrice>\r\n                  {shippingInfo.hasFreeShipping ? '$ 0.00' : `$ ${shippingInfo.shipping.toFixed(2)}`}\r\n                </SummaryItemPrice>\r\n              </SummaryItem>\r\n\r\n              {!shippingInfo.hasFreeShipping && (\r\n                <SummaryItem>\r\n                  <SummaryItemText style={{ fontSize: '12px', color: 'green' }}>\r\n                    Add ${(50 - getTotal()).toFixed(2)} more for FREE shipping!\r\n                  </SummaryItemText>\r\n                </SummaryItem>\r\n              )}\r\n\r\n              <SummaryItem type=\"total\">\r\n                <SummaryItemText>Total</SummaryItemText>\r\n                <SummaryItemPrice>$ {getFinalTotal().toFixed(2)}</SummaryItemPrice>\r\n              </SummaryItem>\r\n\r\n              {showAddressForm && (\r\n                <AddressForm>\r\n                  <h3>Shipping Address</h3>\r\n                  <Input\r\n                    type=\"text\"\r\n                    name=\"street\"\r\n                    placeholder=\"Street Address\"\r\n                    value={address.street}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                  />\r\n                  <InputRow>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"city\"\r\n                        placeholder=\"City\"\r\n                        value={address.city}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"state\"\r\n                        placeholder=\"State\"\r\n                        value={address.state}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                  </InputRow>\r\n                  <InputRow>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"zipCode\"\r\n                        placeholder=\"ZIP Code\"\r\n                        value={address.zipCode}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                    <InputGroup>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"country\"\r\n                        placeholder=\"Country\"\r\n                        value={address.country}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                      />\r\n                    </InputGroup>\r\n                  </InputRow>\r\n                </AddressForm>\r\n              )}\r\n\r\n              <Button \r\n                onClick={handleCheckout}\r\n                disabled={cartItems.length === 0 || isCheckingOut}\r\n              >\r\n                {isCheckingOut ? 'PROCESSING...' : 'CHECKOUT NOW'}\r\n              </Button>\r\n            </Summary>\r\n          )}\r\n        </Bottom>\r\n      </Wrapper>\r\n\r\n      {/* Payment Modal */}\r\n      {showPayment && (\r\n        <PaymentModal>\r\n          <PaymentContent>\r\n            <h2 style={{ marginBottom: '20px', color: '#333' }}>Complete Your Payment</h2>\r\n            \r\n            {paymentError && (\r\n              <ErrorMessage>\r\n                ❌ {paymentError}\r\n              </ErrorMessage>\r\n            )}\r\n\r\n            {paymentSuccess && (\r\n              <SuccessMessage>\r\n                ✅ {paymentSuccess}\r\n              </SuccessMessage>\r\n            )}\r\n\r\n            {!paymentSuccess && clientSecret && (\r\n              <Elements stripe={stripePromise} options={{ clientSecret }}>\r\n                <StripePaymentForm\r\n                  amount={getFinalTotal().toFixed(2)}\r\n                  clientSecret={clientSecret}\r\n                  onSuccess={handlePaymentSuccess}\r\n                  onError={handlePaymentError}\r\n                />\r\n              </Elements>\r\n            )}\r\n\r\n            {!clientSecret && !paymentError && !paymentSuccess && (\r\n              <LoadingSpinner>\r\n                <div>⏳ Setting up payment...</div>\r\n              </LoadingSpinner>\r\n            )}\r\n\r\n            <CancelBtn \r\n              onClick={() => {\r\n                setShowPayment(false);\r\n                setClientSecret('');\r\n                setPaymentError('');\r\n                setPaymentSuccess('');\r\n                setIsCheckingOut(false);\r\n              }}\r\n            >\r\n              Cancel Payment\r\n            </CancelBtn>\r\n          </PaymentContent>\r\n        </PaymentModal>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CartPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}